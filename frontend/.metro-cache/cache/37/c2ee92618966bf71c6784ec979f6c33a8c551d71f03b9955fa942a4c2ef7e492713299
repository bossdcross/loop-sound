{"dependencies":[{"name":"@babel/runtime/helpers/interopRequireDefault","data":{"asyncType":null,"isESMImport":false,"locs":[{"start":{"line":1,"column":40,"index":40},"end":{"line":1,"column":95,"index":95}}],"key":"kslwqCIsh6ew+I1KeA1rlVRjsAk=","exportNames":["*"],"imports":1}},{"name":"@babel/runtime/helpers/toConsumableArray","data":{"asyncType":null,"isESMImport":false,"locs":[{"start":{"line":1,"column":242,"index":242},"end":{"line":1,"column":293,"index":293}}],"key":"kiCFfIx1MWoD4noR0gEoyrFAUKE=","exportNames":["*"],"imports":1}},{"name":"@babel/runtime/helpers/slicedToArray","data":{"asyncType":null,"isESMImport":false,"locs":[{"start":{"line":1,"column":338,"index":338},"end":{"line":1,"column":385,"index":385}}],"key":"5y7e5+zC7teYEEC6niD9f5zII1M=","exportNames":["*"],"imports":1}},{"name":"@posthog/core","data":{"asyncType":null,"isESMImport":false,"locs":[{"start":{"line":1,"column":397,"index":397},"end":{"line":1,"column":421,"index":421}}],"key":"QgcbFeNLovyWG+0GQoq9GjKcB80=","exportNames":["*"],"imports":1}},{"name":"react","data":{"asyncType":null,"isESMImport":false,"locs":[{"start":{"line":1,"column":433,"index":433},"end":{"line":1,"column":449,"index":449}}],"key":"XN65eZP/QkNMzaBAXbG/zPyidpY=","exportNames":["*"],"imports":1}},{"name":"../hooks/usePostHog","data":{"asyncType":null,"isESMImport":false,"locs":[{"start":{"line":1,"column":466,"index":466},"end":{"line":1,"column":496,"index":496}}],"key":"X6kpgGzXL59QP3cuQA/7UPor8Tw=","exportNames":["*"],"imports":1}}],"output":[{"data":{"code":"__d(function (global, require, _$$_IMPORT_DEFAULT, _$$_IMPORT_ALL, module, exports, _dependencyMap) {\n  \"use strict\";\n\n  var _interopRequireDefault = require(_dependencyMap[0], \"@babel/runtime/helpers/interopRequireDefault\");\n  Object.defineProperty(exports, \"__esModule\", {\n    value: true\n  });\n  exports.useSurveyStorage = useSurveyStorage;\n  var _toConsumableArray2 = _interopRequireDefault(require(_dependencyMap[1], \"@babel/runtime/helpers/toConsumableArray\"));\n  var _slicedToArray2 = _interopRequireDefault(require(_dependencyMap[2], \"@babel/runtime/helpers/slicedToArray\"));\n  var _core = require(_dependencyMap[3], \"@posthog/core\");\n  var _react = require(_dependencyMap[4], \"react\");\n  var _usePostHog = require(_dependencyMap[5], \"../hooks/usePostHog\");\n  function useSurveyStorage() {\n    var posthogStorage = (0, _usePostHog.usePostHog)();\n    var _useState = (0, _react.useState)(undefined),\n      _useState2 = (0, _slicedToArray2[\"default\"])(_useState, 2),\n      lastSeenSurveyDate = _useState2[0],\n      setLastSeenSurveyDate = _useState2[1];\n    var _useState3 = (0, _react.useState)([]),\n      _useState4 = (0, _slicedToArray2[\"default\"])(_useState3, 2),\n      seenSurveys = _useState4[0],\n      setSeenSurveys = _useState4[1];\n    (0, _react.useEffect)(function () {\n      posthogStorage.ready().then(function () {\n        var lastSeenSurveyDate = posthogStorage.getPersistedProperty(_core.PostHogPersistedProperty.SurveyLastSeenDate);\n        if (typeof lastSeenSurveyDate === 'string') {\n          setLastSeenSurveyDate(new Date(lastSeenSurveyDate));\n        }\n        var serialisedSeenSurveys = posthogStorage.getPersistedProperty(_core.PostHogPersistedProperty.SurveysSeen);\n        if (typeof serialisedSeenSurveys === 'string') {\n          var parsedSeenSurveys = JSON.parse(serialisedSeenSurveys);\n          if (Array.isArray(parsedSeenSurveys) && typeof parsedSeenSurveys[0] === 'string') {\n            setSeenSurveys(parsedSeenSurveys);\n          }\n        }\n      });\n    }, [posthogStorage]);\n    return {\n      seenSurveys: seenSurveys,\n      setSeenSurvey: (0, _react.useCallback)(function (surveyId) {\n        setSeenSurveys(function (current) {\n          var newValue = [surveyId].concat((0, _toConsumableArray2[\"default\"])(current.filter(function (id) {\n            return id !== surveyId;\n          })));\n          posthogStorage.setPersistedProperty(_core.PostHogPersistedProperty.SurveysSeen, JSON.stringify(newValue.slice(0, 20)));\n          return newValue;\n        });\n      }, [posthogStorage]),\n      lastSeenSurveyDate: lastSeenSurveyDate,\n      setLastSeenSurveyDate: (0, _react.useCallback)(function (date) {\n        setLastSeenSurveyDate(date);\n        posthogStorage.setPersistedProperty(_core.PostHogPersistedProperty.SurveyLastSeenDate, date.toISOString());\n      }, [posthogStorage])\n    };\n  }\n});","lineCount":57,"map":[[2,2,1,0],[2,14,1,12],[4,2,1,13],[4,6,1,17,"_interopRequireDefault"],[4,28,1,39],[4,31,1,40,"require"],[4,38,1,47],[4,39,1,47,"_dependencyMap"],[4,53,1,47],[4,104,1,94],[4,105,1,95],[5,2,1,96,"Object"],[5,8,1,102],[5,9,1,103,"defineProperty"],[5,23,1,117],[5,24,1,118,"exports"],[5,31,1,125],[5,33,1,126],[5,45,1,138],[5,47,1,139],[6,4,1,140,"value"],[6,9,1,145],[6,11,1,146],[7,2,1,150],[7,3,1,151],[7,4,1,152],[8,2,1,153,"exports"],[8,9,1,160],[8,10,1,161,"useSurveyStorage"],[8,26,1,177],[8,29,1,178,"useSurveyStorage"],[8,45,1,194],[9,2,1,195],[9,6,1,199,"_toConsumableArray2"],[9,25,1,218],[9,28,1,219,"_interopRequireDefault"],[9,50,1,241],[9,51,1,242,"require"],[9,58,1,249],[9,59,1,249,"_dependencyMap"],[9,73,1,249],[9,120,1,292],[9,121,1,293],[9,122,1,294],[10,2,1,295],[10,6,1,299,"_slicedToArray2"],[10,21,1,314],[10,24,1,315,"_interopRequireDefault"],[10,46,1,337],[10,47,1,338,"require"],[10,54,1,345],[10,55,1,345,"_dependencyMap"],[10,69,1,345],[10,112,1,384],[10,113,1,385],[10,114,1,386],[11,2,1,387],[11,6,1,391,"_core"],[11,11,1,396],[11,14,1,397,"require"],[11,21,1,404],[11,22,1,404,"_dependencyMap"],[11,36,1,404],[11,56,1,420],[11,57,1,421],[12,2,1,422],[12,6,1,426,"_react"],[12,12,1,432],[12,15,1,433,"require"],[12,22,1,440],[12,23,1,440,"_dependencyMap"],[12,37,1,440],[12,49,1,448],[12,50,1,449],[13,2,1,450],[13,6,1,454,"_usePostHog"],[13,17,1,465],[13,20,1,466,"require"],[13,27,1,473],[13,28,1,473,"_dependencyMap"],[13,42,1,473],[13,68,1,495],[13,69,1,496],[14,2,1,497],[14,11,1,506,"useSurveyStorage"],[14,27,1,522,"useSurveyStorage"],[14,28,1,522],[14,30,1,524],[15,4,1,525],[15,8,1,529,"posthogStorage"],[15,22,1,543],[15,25,1,544],[15,26,1,545],[15,27,1,546],[15,29,1,547,"_usePostHog"],[15,40,1,558],[15,41,1,559,"usePostHog"],[15,51,1,569],[15,53,1,571],[15,54,1,572],[16,4,1,573],[16,8,1,577,"_useState"],[16,17,1,586],[16,20,1,587],[16,21,1,588],[16,22,1,589],[16,24,1,590,"_react"],[16,30,1,596],[16,31,1,597,"useState"],[16,39,1,605],[16,41,1,607,"undefined"],[16,50,1,616],[16,51,1,617],[17,6,1,618,"_useState2"],[17,16,1,628],[17,19,1,629],[17,20,1,630],[17,21,1,631],[17,23,1,632,"_slicedToArray2"],[17,38,1,647],[17,39,1,648],[17,48,1,657],[17,49,1,658],[17,51,1,660,"_useState"],[17,60,1,669],[17,62,1,670],[17,63,1,671],[17,64,1,672],[18,6,1,673,"lastSeenSurveyDate"],[18,24,1,691],[18,27,1,692,"_useState2"],[18,37,1,702],[18,38,1,703],[18,39,1,704],[18,40,1,705],[19,6,1,706,"setLastSeenSurveyDate"],[19,27,1,727],[19,30,1,728,"_useState2"],[19,40,1,738],[19,41,1,739],[19,42,1,740],[19,43,1,741],[20,4,1,742],[20,8,1,746,"_useState3"],[20,18,1,756],[20,21,1,757],[20,22,1,758],[20,23,1,759],[20,25,1,760,"_react"],[20,31,1,766],[20,32,1,767,"useState"],[20,40,1,775],[20,42,1,777],[20,44,1,779],[20,45,1,780],[21,6,1,781,"_useState4"],[21,16,1,791],[21,19,1,792],[21,20,1,793],[21,21,1,794],[21,23,1,795,"_slicedToArray2"],[21,38,1,810],[21,39,1,811],[21,48,1,820],[21,49,1,821],[21,51,1,823,"_useState3"],[21,61,1,833],[21,63,1,834],[21,64,1,835],[21,65,1,836],[22,6,1,837,"seenSurveys"],[22,17,1,848],[22,20,1,849,"_useState4"],[22,30,1,859],[22,31,1,860],[22,32,1,861],[22,33,1,862],[23,6,1,863,"setSeenSurveys"],[23,20,1,877],[23,23,1,878,"_useState4"],[23,33,1,888],[23,34,1,889],[23,35,1,890],[23,36,1,891],[24,4,1,892],[24,5,1,893],[24,6,1,894],[24,8,1,895,"_react"],[24,14,1,901],[24,15,1,902,"useEffect"],[24,24,1,911],[24,26,1,913],[24,38,1,923],[25,6,1,924,"posthogStorage"],[25,20,1,938],[25,21,1,939,"ready"],[25,26,1,944],[25,27,1,945],[25,28,1,946],[25,29,1,947,"then"],[25,33,1,951],[25,34,1,952],[25,46,1,962],[26,8,1,963],[26,12,1,967,"lastSeenSurveyDate"],[26,30,1,985],[26,33,1,986,"posthogStorage"],[26,47,1,1000],[26,48,1,1001,"getPersistedProperty"],[26,68,1,1021],[26,69,1,1022,"_core"],[26,74,1,1027],[26,75,1,1028,"PostHogPersistedProperty"],[26,99,1,1052],[26,100,1,1053,"SurveyLastSeenDate"],[26,118,1,1071],[26,119,1,1072],[27,8,1,1073],[27,12,1,1076],[27,19,1,1083,"lastSeenSurveyDate"],[27,37,1,1101],[27,42,1,1104],[27,50,1,1112],[27,52,1,1113],[28,10,1,1114,"setLastSeenSurveyDate"],[28,31,1,1135],[28,32,1,1136],[28,36,1,1140,"Date"],[28,40,1,1144],[28,41,1,1145,"lastSeenSurveyDate"],[28,59,1,1163],[28,60,1,1164],[28,61,1,1165],[29,8,1,1166],[30,8,1,1167],[30,12,1,1171,"serialisedSeenSurveys"],[30,33,1,1192],[30,36,1,1193,"posthogStorage"],[30,50,1,1207],[30,51,1,1208,"getPersistedProperty"],[30,71,1,1228],[30,72,1,1229,"_core"],[30,77,1,1234],[30,78,1,1235,"PostHogPersistedProperty"],[30,102,1,1259],[30,103,1,1260,"SurveysSeen"],[30,114,1,1271],[30,115,1,1272],[31,8,1,1273],[31,12,1,1276],[31,19,1,1283,"serialisedSeenSurveys"],[31,40,1,1304],[31,45,1,1307],[31,53,1,1315],[31,55,1,1316],[32,10,1,1317],[32,14,1,1321,"parsedSeenSurveys"],[32,31,1,1338],[32,34,1,1339,"JSON"],[32,38,1,1343],[32,39,1,1344,"parse"],[32,44,1,1349],[32,45,1,1350,"serialisedSeenSurveys"],[32,66,1,1371],[32,67,1,1372],[33,10,1,1373],[33,14,1,1376,"Array"],[33,19,1,1381],[33,20,1,1382,"isArray"],[33,27,1,1389],[33,28,1,1390,"parsedSeenSurveys"],[33,45,1,1407],[33,46,1,1408],[33,50,1,1410],[33,57,1,1417,"parsedSeenSurveys"],[33,74,1,1434],[33,75,1,1435],[33,76,1,1436],[33,77,1,1437],[33,82,1,1440],[33,90,1,1448],[33,92,1,1449],[34,12,1,1450,"setSeenSurveys"],[34,26,1,1464],[34,27,1,1465,"parsedSeenSurveys"],[34,44,1,1482],[34,45,1,1483],[35,10,1,1484],[36,8,1,1485],[37,6,1,1486],[37,7,1,1487],[37,8,1,1488],[38,4,1,1489],[38,5,1,1490],[38,7,1,1491],[38,8,1,1492,"posthogStorage"],[38,22,1,1506],[38,23,1,1507],[38,24,1,1508],[39,4,1,1509],[39,11,1,1515],[40,6,1,1516,"seenSurveys"],[40,17,1,1527],[40,19,1,1528,"seenSurveys"],[40,30,1,1539],[41,6,1,1540,"setSeenSurvey"],[41,19,1,1553],[41,21,1,1554],[41,22,1,1555],[41,23,1,1556],[41,25,1,1557,"_react"],[41,31,1,1563],[41,32,1,1564,"useCallback"],[41,43,1,1575],[41,45,1,1577],[41,55,1,1586,"surveyId"],[41,63,1,1594],[41,65,1,1595],[42,8,1,1596,"setSeenSurveys"],[42,22,1,1610],[42,23,1,1611],[42,33,1,1620,"current"],[42,40,1,1627],[42,42,1,1628],[43,10,1,1629],[43,14,1,1633,"newValue"],[43,22,1,1641],[43,25,1,1642],[43,26,1,1643,"surveyId"],[43,34,1,1651],[43,35,1,1652],[43,36,1,1653,"concat"],[43,42,1,1659],[43,43,1,1660],[43,44,1,1661],[43,45,1,1662],[43,47,1,1663,"_toConsumableArray2"],[43,66,1,1682],[43,67,1,1683],[43,76,1,1692],[43,77,1,1693],[43,79,1,1695,"current"],[43,86,1,1702],[43,87,1,1703,"filter"],[43,93,1,1709],[43,94,1,1710],[43,104,1,1719,"id"],[43,106,1,1721],[43,108,1,1722],[44,12,1,1723],[44,19,1,1730,"id"],[44,21,1,1732],[44,26,1,1735,"surveyId"],[44,34,1,1743],[45,10,1,1744],[45,11,1,1745],[45,12,1,1746],[45,13,1,1747],[45,14,1,1748],[46,10,1,1749,"posthogStorage"],[46,24,1,1763],[46,25,1,1764,"setPersistedProperty"],[46,45,1,1784],[46,46,1,1785,"_core"],[46,51,1,1790],[46,52,1,1791,"PostHogPersistedProperty"],[46,76,1,1815],[46,77,1,1816,"SurveysSeen"],[46,88,1,1827],[46,90,1,1828,"JSON"],[46,94,1,1832],[46,95,1,1833,"stringify"],[46,104,1,1842],[46,105,1,1843,"newValue"],[46,113,1,1851],[46,114,1,1852,"slice"],[46,119,1,1857],[46,120,1,1858],[46,121,1,1859],[46,123,1,1860],[46,125,1,1862],[46,126,1,1863],[46,127,1,1864],[46,128,1,1865],[47,10,1,1866],[47,17,1,1873,"newValue"],[47,25,1,1881],[48,8,1,1882],[48,9,1,1883],[48,10,1,1884],[49,6,1,1885],[49,7,1,1886],[49,9,1,1887],[49,10,1,1888,"posthogStorage"],[49,24,1,1902],[49,25,1,1903],[49,26,1,1904],[50,6,1,1905,"lastSeenSurveyDate"],[50,24,1,1923],[50,26,1,1924,"lastSeenSurveyDate"],[50,44,1,1942],[51,6,1,1943,"setLastSeenSurveyDate"],[51,27,1,1964],[51,29,1,1965],[51,30,1,1966],[51,31,1,1967],[51,33,1,1968,"_react"],[51,39,1,1974],[51,40,1,1975,"useCallback"],[51,51,1,1986],[51,53,1,1988],[51,63,1,1997,"date"],[51,67,1,2001],[51,69,1,2002],[52,8,1,2003,"setLastSeenSurveyDate"],[52,29,1,2024],[52,30,1,2025,"date"],[52,34,1,2029],[52,35,1,2030],[53,8,1,2031,"posthogStorage"],[53,22,1,2045],[53,23,1,2046,"setPersistedProperty"],[53,43,1,2066],[53,44,1,2067,"_core"],[53,49,1,2072],[53,50,1,2073,"PostHogPersistedProperty"],[53,74,1,2097],[53,75,1,2098,"SurveyLastSeenDate"],[53,93,1,2116],[53,95,1,2117,"date"],[53,99,1,2121],[53,100,1,2122,"toISOString"],[53,111,1,2133],[53,112,1,2134],[53,113,1,2135],[53,114,1,2136],[54,6,1,2137],[54,7,1,2138],[54,9,1,2139],[54,10,1,2140,"posthogStorage"],[54,24,1,2154],[54,25,1,2155],[55,4,1,2156],[55,5,1,2157],[56,2,1,2158],[57,0,1,2159],[57,3]],"functionMap":{"names":["<global>","useSurveyStorage","<anonymous>","posthogStorage.ready.then$argument_0","setSeenSurveys$argument_0","current.filter$argument_0"],"mappings":"AAA,ifC,gaC,uCC,uhBD,GD,uFC,kCE,mGC,mCD,0IF,GD,sGC,sJD"},"hasCjsExports":true},"type":"js/module"}]}